<div style = "margin-bottom: 2rem;"></div>
<form class="employee-filter-form" [formGroup]="employeeFilterForm">
  <p-floatlabel>
    <i class="pi pi-user mr-2"></i>
    <input pInputText id="name_substr" formControlName="name_substr" autocomplete="off" />
    <label for="name_substr">Search By Name</label>
  </p-floatlabel>
  
  <div class="button-container flex gap-2">
    <button pButton type="button" class="p-button-sm" style="height: 2.5rem;" (click)="openAddEmployeeDialog()">
      <i class="pi pi-plus" pButtonIcon style = "padding-right: 2px;"></i>
      <span class="font-medium">Add Employee</span>
    </button>
    <button pButton type="button" class="p-button-sm" style="height: 2.5rem;" (click)="openImportEmployeesDialog()">
      <i class="pi pi-download" pButtonIcon  style="padding-right: 4px;"></i>
      <span class="font-medium">Import Employees</span>
    </button>
  </div>
</form>
<p-table
  [value]="employees"
  stripedRows
  [tableStyle]="{ 'min-width': '50rem' }"
  [paginator]="true"
  [rows]="rows"
  [rowsPerPageOptions]="[10, 25, 50, 100]"
  [showCurrentPageReport]="true"
  [totalRecords]="total_records"
  [loading]="loading"
  (onPage)="onPageChanged($event)"
  [lazy]="true"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Number</th>
      <th>Name</th>
      <th>Email</th>
      <th class="text-center">Gender</th>
      <th class="text-center">Status</th>
      <th class="text-center">Phone Number</th>
      <th class="text-center">Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-employee>
    <tr>
      <td>{{ employee.number }}</td>
      <td>{{ employee.first_name }} {{ employee.last_name }}</td>
      <td>{{ employee.email }}</td>
      <td class="text-center">{{ employee.gender }}</td>
      <td class="text-center">
        
        <i
          class="pi"
          [ngClass]="{
            'pi-check-circle text-green-500': employee.account_status === 'Active',
            'pi-times-circle text-red-500': employee.account_status === 'Inactive',
            'pi-exclamation-triangle text-yellow-500': employee.account_status === 'Blocked',
          }"
        ></i>
      </td>
      <td class="text-center">
        @if (employee.phone_number) {
        {{ employee.phone_number }}
        } @else {--}
      </td>
      
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="7">No Employees</td>
    </tr>
  </ng-template>
</p-table>
